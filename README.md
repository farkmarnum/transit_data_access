# transit_data_access

*Work In Progress*

Structure so far:
1. db_server

   This is the code to be run on the database server. It periodically checks the MTA static and realtime feeds, parses the data and pushes the processed realtime.json.gz to the web server(s). To aid scaleability, file heirarchies on the Database Server and Web Servers don't overlap so they can coexist on one machine if desired (communicating through loopback).

   * main.py starts a scheduler to call realtime.main() once a day and static.main() once every few seconds, and then starts the server via server_setup.py which uses WebSockets to communicate with the web server(s).

   * static.py produces static.json, which realtime.py uses to produce realtime.json

   * transit_system_config.py gives information for specific transit systems, stored in SimpleNamespace objects

   * misc.py contains miscellaneous modules and classes for the package & sets up logging

   * server.conf (generated by configuration script - TODO) supplies host & port info for the database server

2. web_server

   This is the code to be run on the web server(s). It connects to the Database Server and then receives data via PUSH events. It serves HTTP(S) requests and uses WebSockets to PUSH new realtime.json.gz every ~15 secs.

   * main.py connects to the Databse Server and then serves HTTP connections & pushes new data to clients via WebSockets

   * misc.py contains miscellaneous modules and classes for the package & sets up logging

   * server.conf (generated by configuration script - TODO) supplies host & port info for the database server

3. requirements.txt

   * list of required python packages

   * generated with: pip -l freeze > requirements.txt
